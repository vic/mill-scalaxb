language: java
jdk:
  - openjdk10
before_install:
  - sh -c '(echo "#!/usr/bin/env sh" && curl -L https://github.com/lihaoyi/mill/releases/download/0.3.3/0.3.3) > ~/mill && chmod +x ~/mill'
install:
  - ~/mill scalaxb.publishLocal
script:
  - (cd example; ~/mill hello.compile)
  - grep Generated example/out/hello/scalaxbGeneratedSources/dest/*.scala
  - file example/out/hello/compile/dest/classes/example/Request.class
  - file example/out/hello/compile/dest/classes/scalaxb/Helper.class

